require("./gotop.js"),require("./waterfall.min.js");var Base=require("./base.js"),pageType=window.pageType||"",stopQueryItem="fp"===pageType||"thing"===pageType?!1:!0,last_post_id="",last_info_id="",queryInformation="thing"===pageType?!1:!0,$waterfall=$("#waterfall"),isPageDoneMarkShow;$waterfall.waterfall({itemCls:"pin",fitWidth:!0,colWidth:320,gutterWidth:20,gutterHeight:20,maxCol:3,checkImagesLoaded:!1,loadingMsg:'<p class="loading"><img src="//pic.yupoo.com/iewei/C6Gb0faQ/PMs7M.gif" width="202" height="70"/></p>',path:function(){return"query/all?"+$.param({from:"fp",cat:window.curCatId||"",id:last_post_id,noItem:stopQueryItem,information:queryInformation,info_id:last_info_id})},callbacks:{loadingStart:function(i){i.show()},loadingFinished:function(i,a){a?isPageDoneMarkShow||($('<div class="page-load-done"></div>').insertAfter("#content"),i.remove(),isPageDoneMarkShow=!0):i.fadeOut()},renderData:function(i,a){var e="";return i.infos.length?$.each(i.infos,function(i,a){last_info_id=a.id,e+='<a href="/i'+("0"!==a.sid?a.sid:a.id)+'" class="pin pin-info"><img src="'+a.cover+'" width="320" height="250" /><div class="extra"><div class="date">'+a.dateStr.toUpperCase()+'</div><div class="title">'+a.title+'</div><div class="desc">'+a.desc+"</div></div></a>"}):queryInformation=!1,i.items.length?$.each(i.items,function(i,a){last_post_id=a.id,e+='<a href="/'+("0"!==a.sid?a.sid:a.id)+'" class="pin pin-item"><img src="'+a.img+'" width="320" height="420" /><div class="extra"><div class="mask"></div>'+Base.stddate(a.modified)+'<div class="title">'+a.title+'</div><div class="desc">'+a.fullcontent+'</div><div class="author"><s></s>'+a.nick+"</div></div>"+("album"===a.type?'<s class="type-album"></s>':"")+"</a>"}):stopQueryItem=!0,e?e:void($waterfall.data("plugin_waterfall").options.maxPage=1)}}}),Base.initCategory(window.subCat,window.curCatId);