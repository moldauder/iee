!function(t){function i(s){if(e[s])return e[s].exports;var a=e[s]={exports:{},id:s,loaded:!1};return t[s].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){e(1),e(2);var s,a=e(3),n=window.pageType||"",o="fp"!==n&&"thing"!==n,r="",l="",c="thing"!==n,d=$("#waterfall");d.waterfall({itemCls:"pin",fitWidth:!0,colWidth:320,gutterWidth:20,gutterHeight:20,maxCol:3,checkImagesLoaded:!1,loadingMsg:'<p class="loading"><img src="//pic.yupoo.com/iewei/C6Gb0faQ/PMs7M.gif" width="202" height="70"/></p>',path:function(){return"query/all?"+$.param({from:"fp",cat:window.curCatId||"",id:r,noItem:o,information:c,info_id:l})},callbacks:{loadingStart:function(t){t.show()},loadingFinished:function(t,i){i?s||($('<div class="page-load-done"></div>').insertAfter("#content"),t.remove(),s=!0):t.fadeOut()},renderData:function(t,i){var e="";return t.infos.length?$.each(t.infos,function(t,i){l=i.id,e+='<a href="/i'+("0"!==i.sid?i.sid:i.id)+'" class="pin pin-info"><img src="'+i.cover+'" width="320" height="250" /><div class="extra"><div class="date">'+i.dateStr.toUpperCase()+'</div><div class="title">'+i.title+'</div><div class="desc">'+i.desc+"</div></div></a>"}):c=!1,t.items.length?$.each(t.items,function(t,i){r=i.id,e+='<a href="/'+("0"!==i.sid?i.sid:i.id)+'" class="pin pin-item"><img src="'+i.img+'" width="320" height="420" /><div class="extra"><div class="mask"></div>'+a.stddate(i.modified)+'<div class="title">'+i.title+'</div><div class="desc">'+i.fullcontent+'</div><div class="author"><s></s>'+i.nick+"</div></div>"+("album"===i.type?'<s class="type-album"></s>':"")+"</a>"}):o=!0,e?e:void(d.data("plugin_waterfall").options.maxPage=1)}}}),a.initCategory(window.subCat,window.curCatId)},function(t,i){$(function(){var t=$(window),i=$('<span class="gotop" hideFocus="true"></span>'),e="hide";(new Image).src="//pic.yupoo.com/iewei/Cam6yIZo/XryK.gif",i.click(function(){$(document.body).animate({scrollTop:0},Math.min(.2*t.scrollTop()/800,1),"linear",function(){i.css("opacity",0),e="hide"})}),i.mouseenter(function(){i.addClass("gotop-hover")}),i.mouseleave(function(){i.removeClass("gotop-hover")}),t.scroll(function(){var s=t.scrollTop();s>200&&"show"!==e?(e="show",i.animate({opacity:.9},.4,"linear"),e="show"):0===s&&"hide"!==e&&(i.animate({opacity:0},.4,"linear"),e="hide")}),i.appendTo($(document.body))})},function(t,i){/*! waterfall - v0.1.73 - 2015-12-01
	* http://wlog.cn/waterfall/
	* Copyright (c) 2015 bingdian; Licensed MIT */
!function(t,i,e,s){"use strict";function a(i,e){this.$element=t(i),this.options=t.extend(!0,{},r,e),this.colHeightArray=[],this.styleQueue=[],this._init()}var n=t(i),o="waterfall",r={itemCls:"waterfall-item",prefix:"waterfall",fitWidth:!0,colWidth:240,gutterWidth:10,gutterHeight:10,align:"center",minCol:1,maxCol:s,maxPage:s,bufferPixel:-50,containerStyle:{position:"relative"},resizable:!0,isFadeIn:!1,isAnimated:!1,animationOptions:{},isAutoPrefill:!0,checkImagesLoaded:!0,path:s,dataType:"json",params:{},headers:{},loadingMsg:'<div style="text-align:center;padding:10px 0; color:#999;"><img src="data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Li4tra2u7u7jk5OTMzM1hYWJubm4CAgMjIyE9PT29vb6KiooODg8vLy1JSUjc3N3Jycuvr6+Dg4Pb29mBgYOPj4/X19cXFxbOzs9XV1fHx8TMzMzMzMzMzMyH5BAkLAAAAIf4aQ3JlYXRlZCB3aXRoIGFqYXhsb2FkLmluZm8AIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7" alt=""><br />Loading...</div>',state:{isDuringAjax:!1,isProcessingData:!1,isResizing:!1,isPause:!1,curPage:1},callbacks:{loadingStart:function(t){t.show()},loadingFinished:function(t,i){i?t.remove():t.fadeOut()},loadingError:function(t,i){t.html("Data load faild, please try again later.")},renderData:function(i,e){var s,a;return"json"===e||"jsonp"===e?(s=t("#waterfall-tpl").html(),(a=Handlebars.compile(s))(i)):i}},debug:!1};a.prototype={constructor:a,_debug:function(){!0===this.options.debug&&("undefined"!=typeof console&&"function"==typeof console.log?1===Array.prototype.slice.call(arguments).length&&"string"==typeof Array.prototype.slice.call(arguments)[0]?console.log(Array.prototype.slice.call(arguments).toString()):console.log(Array.prototype.slice.call(arguments)):Function.prototype.bind||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments)))},_init:function(t){var i=this.options,e=i.path;return this._setColumns(),this._initContainer(),this._resetColumnsHeightArray(),this.reLayout(t),e?(i.isAutoPrefill&&this._prefill(),i.resizable&&this._doResize(),void this._doScroll()):void this._debug("Invalid path")},_initContainer:function(){var i=this.options,e=i.prefix;t("body").css({overflow:"auto"}),this.$element.css(this.options.containerStyle).addClass(e+"-container"),this.$element.after('<div id="'+e+'-loading">'+i.loadingMsg+'</div><div id="'+e+'-message" style="text-align:center;color:#999;"></div>'),this.$loading=t("#"+e+"-loading"),this.$message=t("#"+e+"-message")},_getColumns:function(){var t=this.options,i=t.fitWidth?this.$element.parent():this.$element,e="BODY"===i[0].tagName?i.width()-20:i.width(),s=t.colWidth,a=t.gutterWidth,n=t.minCol,o=t.maxCol,r=Math.floor(e/(s+a)),l=Math.max(r,n);return o&&l>o?o:l},_setColumns:function(){this.cols=this._getColumns()},_getItems:function(t){var i=t.filter("."+this.options.itemCls).css({position:"absolute"});return i},_resetColumnsHeightArray:function(){var t,i=this.cols;for(this.colHeightArray.length=i,t=0;i>t;t++)this.colHeightArray[t]=0},layout:function(t,i){var e,s,a,n,o,r,l=this.options,c=this.options.isFadeIn?this._getItems(t).css({opacity:0}).animate({opacity:1}):this._getItems(t),d=this.options.isAnimated&&this.options.state.isResizing?"animate":"css",h=l.animationOptions,u=l.colWidth,A=l.gutterWidth,g=this.colHeightArray.length,p=l.align;for(this.$element.append(c),"center"===p?(e=(this.$element.width()-u*g-A*(g-1))/2,e=e>0?e:0):"left"===p?e=0:"right"===p&&(e=this.$element.width()-u*g-A*(g-1)),a=0,o=c.length;o>a;a++)this._placeItems(c[a],e);for(n=0,r=this.styleQueue.length;r>n;n++)s=this.styleQueue[n],s.$el[d](s.style,h);this.$element.height(Math.max.apply({},this.colHeightArray)),this.styleQueue=[],this.options.state.isResizing=!1,this.options.state.isProcessingData=!1,i&&i.call(c)},reLayout:function(t){var i=this.$element.find("."+this.options.itemCls);this._resetColumnsHeightArray(),this.layout(i,t)},_placeItems:function(i,e){var s,a,n=t(i),o=this.options,r=o.colWidth,l=o.gutterWidth,c=o.gutterHeight,d=this.colHeightArray,h=d.length,u=Math.min.apply({},d),A=t.inArray(u,d);s=n.hasClass(o.prefix+"-item-fixed-left")?0:n.hasClass(o.prefix+"-item-fixed-right")?h>1?h-1:0:A,a={left:(r+l)*s+e,top:d[s]},this.styleQueue.push({$el:n,style:a}),d[s]+=n.outerHeight()+c},prepend:function(t,i){this.$element.prepend(t),this.reLayout(i)},append:function(t,i){this.$element.append(t),this.reLayout(i)},removeItems:function(t,i){this.$element.find(t).remove(),this.reLayout(i)},option:function(i,e){t.isPlainObject(i)&&(this.options=t.extend(!0,this.options,i),"function"==typeof e&&e(),this._init())},pause:function(t){this.options.state.isPause=!0,"function"==typeof t&&t()},resume:function(t){this.options.state.isPause=!1,"function"==typeof t&&t()},_requestData:function(i){var e,a=this,n=this.options,o=n.maxPage,r=n.state.curPage++,l=n.path,c=n.dataType,d=n.params,h=n.headers;return o!==s&&r>o?(n.state.isBeyondMaxPage=!0,void n.callbacks.loadingFinished(this.$loading,n.state.isBeyondMaxPage)):(e="function"==typeof l?l(r):l.join(r),this._debug("heading into ajax",e+t.param(d)),n.callbacks.loadingStart(this.$loading),n.state.isDuringAjax=!0,n.state.isProcessingData=!0,void t.ajax({url:e,data:d,headers:h,dataType:c,success:function(t){a._handleResponse(t,i),a.options.state.isDuringAjax=!1},error:function(t){a._responeseError("error")}}))},_handleResponse:function(i,e){var s=this,a=this.options,n=t.trim(a.callbacks.renderData(i,a.dataType)),o=t(n),r=a.checkImagesLoaded;r?o.imagesLoaded(function(){s.append(o,e),s.options.callbacks.loadingFinished(s.$loading,s.options.state.isBeyondMaxPage)}):(s.append(o,e),s.options.callbacks.loadingFinished(s.$loading,s.options.state.isBeyondMaxPage))},_responeseError:function(t){this.$loading.hide(),this.options.callbacks.loadingError(this.$message,t),"end"!==t&&"error"!==t&&(t="unknown"),this._debug("Error",t)},_nearbottom:function(){var t=this.options,i=Math.min.apply({},this.colHeightArray),e=n.scrollTop()+n.height()-this.$element.offset().top-i;return this._debug("math:",e),e>t.bufferPixel},_prefill:function(){this.$element.height()<=n.height()&&this._scroll()},_scroll:function(){var t=this.options,i=t.state,e=this;i.isProcessingData||i.isDuringAjax||i.isInvalidPage||i.isPause||this._nearbottom()&&this._requestData(function(){setTimeout(function(){e._scroll()},100)})},_doScroll:function(){var t,i=this;n.bind("scroll",function(){t&&clearTimeout(t),t=setTimeout(function(){i._scroll()},100)})},_resize:function(){var t=this.cols,i=this._getColumns();(i!==t||"left"!==this.options.align)&&(this.options.state.isResizing=!0,this.cols=i,this.reLayout(),this._prefill())},_doResize:function(){var t,i=this;n.bind("resize",function(){t&&clearTimeout(t),t=setTimeout(function(){i._resize()},100)})}},t.fn[o]=function(i){if("string"==typeof i){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var s=t.data(this,"plugin_"+o);return s?t.isFunction(s[i])&&"_"!==i.charAt(0)?void s[i].apply(s,e):void s._debug('no such method "'+i+'"'):void s._debug("instance is not initialization")})}else this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new a(this,i))});return this}}(jQuery,window,document),function(t,i){"use strict";var e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";t.fn.imagesLoaded=function(s){function a(){var i=t(u),e=t(A);l&&(A.length?l.reject(d,i,e):l.resolve(d)),t.isFunction(s)&&s.call(r,d,i,e)}function n(t){o(t.target,"error"===t.type)}function o(i,s){i.src!==e&&-1===t.inArray(i,h)&&(h.push(i),s?A.push(i):u.push(i),t.data(i,"imagesLoaded",{isBroken:s,src:i.src}),c&&l.notifyWith(t(i),[s,d,t(u),t(A)]),d.length===h.length&&(setTimeout(a),d.unbind(".imagesLoaded",n)))}var r=this,l=t.isFunction(t.Deferred)?t.Deferred():0,c=t.isFunction(l.notify),d=r.find("img").add(r.filter("img")),h=[],u=[],A=[];return t.isPlainObject(s)&&t.each(s,function(t,i){"callback"===t?s=i:l&&l[t](i)}),d.length?d.bind("load.imagesLoaded error.imagesLoaded",n).each(function(s,a){var n=a.src,r=t.data(a,"imagesLoaded");return r&&r.src===n?void o(a,r.isBroken):a.complete&&a.naturalWidth!==i?void o(a,0===a.naturalWidth||0===a.naturalHeight):void((a.readyState||a.complete)&&(a.src=e,a.src=n))}):a(),l?l.promise(r):r}}(jQuery)},function(t,i){var e=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];i.stddate=function(t){var i=t.split(" ")[0].split("-");if(3===i.length){var s=i[1]-1;return s>-1&&12>s&&(i[1]=e[s]),'<div class="stddate"><span class="day">'+i[2]+'</span><span class="month">'+i[1]+'</span><span class="year">'+i[0]+"</span></div>"}return""},i.filterHtmlTag=function(t){var i=document.createElement("div");return i.innerHTML=t,DOM.text(i)},i.initCategory=function(t,i){var e=$("#category"),s=$('<div class="category-placeholder"></div>');s.insertBefore(e);var a,n=e.find("div.sub"),o=function(e){var s=t[e.attr("data-cat")];if($.isArray(s)||0!==s.length){var o=e.data("isExpand");if(o){var r=n.find("div.sub-cat");r.length&&r.animate({marginTop:0-r.outerHeight()},.5),a=null}else{if("color"===s[0].type){var l='<div class="sub-cat sub-cat-color"><div class="list">';$.each(s,function(t,e){l+='<a target="_self" class="cat-'+e.alias+(i===e.id?" active":"")+'" href="?cat='+e.alias+'"><span>'+e.name.substr(e.name.indexOf("/")+1)+"</span></a>"}),l+="</div></div>"}n.html(l);var r=n.find("div.sub-cat"),c=r.outerHeight();r.css("marginTop",0-c),n.css("height",c),r.animate({marginTop:0},.5),a=e}e.data("isExpand",!o)}};e.find("li.collapse a").each(function(){var i=$(this),e=t[i.attr("data-cat")];$.isArray(e)&&e.length&&i.click(function(t){t.preventDefault(),o(i)})});var r,l=$(window);l.scroll(function(){s.offset().top<l.scrollTop()?(r||(r=!0,e.addClass("category-fixed"),s.css("height",e.outerHeight())),a&&o(a)):(r=!1,s.css("height",0),e.removeClass("category-fixed"))})}}]);